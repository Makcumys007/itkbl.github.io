<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
    crossorigin="anonymous">
    <link rel="stylesheet" href="css/style.css">

  <title>Send Message</title>
</head>

<body class="bg-dark">

    

    <nav class="navbar fixed-top navbar-dark bg-light">
        <div class="container">
            <a href="https://www.kazminerals.com/" target="_blank" class="navbar-brand"><img src="img/logo.png" width="100"></a>
            
            <div class="ml-auto">
                <input type="submit" id="ru" class="btn btn-dark" value="Ru">
                <input type="submit" id="kz" class="btn btn-outline-dark" value="Kz">
                <input type="submit" id="en" class="btn btn-outline-dark" value="En">
            </div>
        </div>
    </nav>

    <div class="home">
        <div id="form" class="container">
            <div class="form-group">
                <label id="label-name" class="text-light" for="name">Имя пользователя </label><span  class="text-danger"> *</span>
                <input class="form-control" type="text" id="name" placeholder="Maxim Abylkassov">                
            </div>
            <div class="form-group">
                <label id="label-subject" class="text-light" for="name">Краткое описание </label><span  class="text-danger"> *</span>
                <input class="form-control" type="text" id="subject" placeholder="Outlook, Internet, Printer...">
            </div>
            <div class="form-group">
                <label id="label-email" class="text-light" for="name">Сообщение </label><span  class="text-danger"> *</span>
                <textarea name="email" id="email" class="form-control"></textarea>
            </div>
            <div class="form-group">
                <label id="fields" class="text-light">Примечание: Поля отмеченные (*) обязательны к заполнению.</label>
              
            </div>
            <div class="form-group">
                <input type="submit" id="send" class="btn btn-outline-light btn-block" value="Отправить">
            </div>  
            
            <div id="error" class="text-danger"></div>
        </div>    
    </div>

  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T"
    crossorigin="anonymous"></script>
    <!-- Telegram Bot Settings -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <script>
        let tg = window.Telegram.WebApp;

        let ruBtn = document.getElementById("ru");
        let enBtn = document.getElementById("en");
        let kzBtn = document.getElementById("kz");
        let sendBtn = document.getElementById("send");

        let error = document.getElementById("error");

        let isRu = true
        let isEn = false
        let isKz = false

        // Open full screen mode on smartphone
        tg.expand()

        ruBtn.addEventListener("click", ()=> {

           error.innerText = ''

           isEn = false
           isKz = false
           isRu = true 
            
           document.getElementById("label-name").innerText = "Имя пользователя " 
           document.getElementById("label-subject").innerText = "Краткое описание " 
           document.getElementById("label-email").innerText = "Сообщение " 
           document.getElementById("fields").innerText = "Примечание: Поля отмеченные (*) обязательны к заполнению."
           document.getElementById("send").value = "Отправить" 
           

           ruBtn.classList.remove("btn-outline-dark");
           ruBtn.classList.add("btn-dark");
           enBtn.classList.remove("btn-dark");
           enBtn.classList.add("btn-outline-dark");
           kzBtn.classList.remove("btn-dark");
           kzBtn.classList.add("btn-outline-dark");

        });


        kzBtn.addEventListener("click", ()=> {

        error.innerText = ''

        isEn = false
        isRu = false 
        isKz = true
        
        document.getElementById("label-name").innerText = "Пайдаланушының аты " 
        document.getElementById("label-subject").innerText = "Қысқа сипаттама " 
        document.getElementById("label-email").innerText = "Хабарлама " 
        document.getElementById("fields").innerText = "Ескерту: белгіленген ( * ) жолдарды толтыру міндетті."
        document.getElementById("send").value = "Жіберу" 

        kzBtn.classList.remove("btn-outline-dark");
        kzBtn.classList.add("btn-dark");    
        ruBtn.classList.remove("btn-dark");
        ruBtn.classList.add("btn-outline-dark");
        enBtn.classList.remove("btn-dark");
        enBtn.classList.add("btn-outline-dark");

        });


        enBtn.addEventListener("click", () => {

           error.innerText = ''

           isEn = true
           isRu = false            
           isKz = false
           
           document.getElementById("label-name").innerText = "Login " 
           document.getElementById("label-subject").innerText = "Short description " 
           document.getElementById("label-email").innerText = "Message "  
           document.getElementById("fields").innerText = "Note: Fields marked with (*) are mandatory."
           document.getElementById("send").value = "Send" 
           

           ruBtn.classList.remove("btn-dark");
           ruBtn.classList.add("btn-outline-dark");
           enBtn.classList.remove("btn-outline-dark");
           enBtn.classList.add("btn-dark");
           kzBtn.classList.remove("btn-dark");
           kzBtn.classList.add("btn-outline-dark");
        });

        sendBtn.addEventListener("click", () => {
           
            let name = document.getElementById("name").value;
            let subject = document.getElementById("subject").value;
            let email = document.getElementById("email").value;
            
            if (name.length < 5 && isRu) {
                error.innerText = 'Вы не правильно ввели Имя и Фамилию';
                return;
            } else if (name.length < 5 && isEn) {
                error.innerText = 'You entered your first and last name incorrectly';
                return;
            } else if (name.length < 5 && isKz) {
                error.innerText = 'You entered your first and last name incorrectly';
                return;
            }


            if (subject.length < 3 && isRu) {
                error.innerText = 'Слишком короткая тема письма';
                return;
            } else if (subject.length < 3 && isEn) {
                error.innerText = 'Email subject too short';
                return;
            } else if (subject.length < 3 && isKz) {
                error.innerText = 'Email subject too short';
                return;
            }

            if (email.length < 5 && isRu) {
                error.innerText = 'Слишком короткое содержание письма';
                return;
            } else if (email.length < 5 && isEn) {
                error.innerText = 'The content of the letter is too short';
                return;
            } else if (email.length < 5 && isKz) {
                error.innerText = 'The content of the letter is too short';
                return;
            }
            
            // Sending data to telegram bot
            let data = {
                name: name,
                subject: subject,
                email: email
            }

            tg.sendData(JSON.stringify(data));

            tg.close();
        });

    </script>

</body>

</html>
